<!-- src/app/components/chef/chef.component.html -->
<div class="chef-dashboard">
  <!-- Header -->
  <header class="chef-header">
    <div class="left-section">
      <i class="bi bi-person-circle"></i>
      <span>Bienvenue dans votre espace Chef de Projet</span>
    </div>
    <div class="right-section">
      <app-notification-bell [destinataire]="'chef'"></app-notification-bell>
    </div>
  </header>

  <!-- Sidebar toggle button -->
  <button class="menu-toggle" (click)="toggleSidebar()">
    <i class="bi bi-list"></i>
  </button>

  <div class="chef-layout">
    <!-- Sidebar -->
    <nav class="chef-sidebar" [class.open]="sidebarOpen">
      <ul>
        <li (click)="goToSelectionAppels()">
          <i class="bi bi-check-circle"></i> Sélectionner un appel d'offre
        </li>
        <li (click)="showMesProjets()">
          <i class="bi bi-folder-fill"></i> Mes projets affectés
        </li>
        <li (click)="showConsultants()">
          <i class="bi bi-people-fill"></i> Gestion des consultants
        </li>
        <li (click)="showTaches()">
          <i class="bi bi-kanban-fill"></i> Gestion des tâches
        </li>
        <li (click)="suivi()" >
          <i class="bi bi-bar-chart-line-fill"></i> Suivi global des projets
        </li>

        <!-- Bouton Déconnexion -->
        <li class="logout-btn" (click)="logout()">
          <i class="bi bi-box-arrow-right"></i> Se déconnecter
        </li>
      </ul>
    </nav>

    <!-- Contenu principal -->
    <div class="dashboard-content">
      <div>
        <!-- Phrase explicative au-dessus de la liste -->
        <div class="select-info">
          <i class="bi bi-bar-chart-line"></i>
          <span>Sélectionner un projet pour voir statistiques</span>
        </div>

        <!-- Liste déroulante -->
        <div class="custom-select">
          <select [(ngModel)]="selectedProjet" (change)="chargerStatistiques()">
            <option value="">-- Choisir un projet --</option>
            <option *ngFor="let projet of projetsAffectes" [value]="projet.nomProjet">
              {{ projet.nomProjet }}
            </option>
          </select>
          <i class="bi bi-caret-down-fill dropdown-icon"></i>
        </div>

        <!-- Affichage cartes si stats chargées -->
        <div class="stats-card" *ngIf="statistiques">
          <div class="card">
            <i class="bi bi-list-task"></i>
            <h4>À Faire</h4>
            <p>{{ statistiques.nbAFaire }}</p>
          </div>

          <div class="card">
            <i class="bi bi-hourglass-split"></i>
            <h4>En Cours</h4>
            <p>{{ statistiques.nbEnCours }}</p>
          </div>

          <div class="card">
            <i class="bi bi-check-circle-fill"></i>
            <h4>Terminées</h4>
            <p>{{ statistiques.nbTermine }}</p>
          </div>

          <div class="card">
            <i class="bi bi-exclamation-triangle-fill"></i>
            <h4>Bloquées</h4>
            <p>{{ statistiques.nbBloque }}</p>
          </div>

          <div class="card">
            <i class="bi bi-clock-fill"></i>
            <h4>Retardées</h4>
            <p>{{ statistiques.nbRetarde }}</p>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
